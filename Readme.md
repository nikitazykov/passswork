# Работа с API Passwork

## Для начала работы с API:
1. Создаём коррекнтый __.env__ файл;
2. Указывем в нём наш домен вместо __XXX__, APIkey вместо __XXXX__, нзвание вместо __XXXXX__, login вместо __LOGIN__, при необходимости url вместо __URL__, описание вместо __DESCR__, SeifID вместо __XX__ и FolderID вместо __X__.

## Порядок работы
1. Для начала нужно авторизоватся через APIkey и получить токен, который действителен в течении 10 минут, с которым и будем работать.
2. Выполнить необходимы задачи.
3. Произвести выход или дождаться окончания сессии (при необходимости продолжить работу, авторизовываемся снова).

### Авторизация
1. Запустить скрипт auth_login.sh выполнив:
```sh
bash auth_login.sh
```
Будет произведена авторизация и записан __TOKEN10__ в файл __.env__.

### Создание пароля
1. Запустить скрипт pass_make.sh с переменными __версия площадки, пароль 1, пароль 2__, выполнив:
```sh
bash pass_make.sh 55 123456 abcdef
```
Будет создан ключ 55 c названием XXXXX, логинами LOGIN55, паролями 123456 и abcdef, а так же остальным из .env, если были заполнены, так же предоставлена ссылка на созданый ключ.

### Получение пароля
1. Запустить скрипт pass_search.sh с переменной __версия площадки__, выполнив:
```sh
bash pass_search.sh 55
```
Будет записан ID ключа 55 в .env;
2. Запустить скрипт pass_info.sh с переменной __версия площадки__, выполнив:
```sh
bash pass_info.sh 55
```
Будет выведено инфо о ключе 55 в Passwork.

### Удаление пароля
1. Запустить скрипт pass_search.sh с переменной __версия площадки__, выполнив:
```sh
bash pass_search.sh 55
```
Будет записан ID ключа 55 в .env;

2. Запустить скрипт pass_del.sh с переменной __версия площадки__, выполнив:
```sh
bash pass_del.sh 55
```
Ключ 55 будет удалён из Passwork.

#### Примечание
При наличии нескольких ключей с одинаковым патерном для поиска через pass_search.sh, они все будут добавлены в .env построчно, что приведёт к ошибке, исправить которую, можно удалив остальные строки закрыв ковычки.

### Выход
1. Запустить скрипт auth_logout.sh выполнив:
```sh
bash auth_logout.sh
```
Будет произведён выход и удалён __TOKEN10__ в файл __.env__.

<h3 align="right"><b><a  href="https://github.com/nikitazykov">®By nikitazykov</a></b></h3>